
# AVM - Audio Video Matching

```
./fingerprint  -- фингерпринтилк
./search       -- поиск по отфингерпринченым эмбэддингам
```

### Оценка для матчинга аудио

Spitofy имеет 100M треков. Средняя длинна трека 3 минуты.

Допустим, мы фингерпринтим каждые 10 секунд с пересечением в 5 секунд.
Тогда на один трек нам нужно ~35 эмбэддингов.

3.5B -- общее количество эмбэддингов.

Пусть каждый эмбэддинг занимает 4Кб (размерность 64)

Тогда чтобы сохранить индекс в памяти нужно ~ 14Тб.

## Тест кейсы для матчинга

* замедление/ускорение в 2 раза
* добавление шума
* накладывание одного аудио на другое
* накладывание тишины
* изменение тональности

* Найти аудио, которое матчится на все другие ?
* Сделать ооочень длинное аудио
* Что делать с тишиной?

## Гиперпараметры

* Поисковый движок: Qdrant (HNSW), FAISS

Про алгоритмы поиска в [векторном пр-ве](https://habr.com/ru/companies/vk/articles/338360/)

Про HNSW [itmo wiki](https://neerc.ifmo.ru/wiki/index.php?title=%D0%9F%D0%BE%D0%B8%D1%81%D0%BA_%D0%B1%D0%BB%D0%B8%D0%B6%D0%B0%D0%B9%D1%88%D0%B8%D1%85_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%B5%D0%B9_%D1%81_%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E_%D0%B8%D0%B5%D1%80%D0%B0%D1%80%D1%85%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BC%D0%B0%D0%BB%D0%B5%D0%BD%D1%8C%D0%BA%D0%BE%D0%B3%D0%BE_%D0%BC%D0%B8%D1%80%D0%B0)



